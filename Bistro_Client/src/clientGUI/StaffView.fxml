<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.layout.GridPane?>

<BorderPane prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="Client.StaffController">
   
   <left>
      <VBox prefHeight="600.0" prefWidth="200.0" spacing="10.0" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
         <children>
            <Label text="Bistro Staff" textFill="WHITE">
               <font>
                  <Font name="System Bold" size="20.0" />
               </font>
            </Label>
            <Separator prefWidth="200.0" />
            
            <Label text="Agent Actions" textFill="#bdc3c7" />
            
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onActAsCustomer" 
                    style="-fx-alignment: CENTER-LEFT; -fx-background-color: #27ae60;" text="Act as Customer" textFill="WHITE" />

            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onRegisterCustomer" 
                    style="-fx-alignment: CENTER-LEFT; -fx-background-color: #2980b9;" text="Register Customer" textFill="WHITE" />

            <Separator prefWidth="200.0" />

            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onViewReservations" style="-fx-alignment: CENTER-LEFT;" text="Reservations" />
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onViewWaitingList" style="-fx-alignment: CENTER-LEFT;" text="Waiting List" />
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onViewCurrentDiners" style="-fx-alignment: CENTER-LEFT;" text="Current Diners" />
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onViewSubscribers" style="-fx-alignment: CENTER-LEFT;" text="Manage Subscribers" />
            
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onManageTables" style="-fx-alignment: CENTER-LEFT;" text="Manage Tables" />
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onManageOpeningHours" style="-fx-alignment: CENTER-LEFT;" text="Manage Opening Hours" />
            
            <Separator prefWidth="200.0" />
            
			<Label fx:id="lblManagerSection" text="Manager Actions" textFill="#bdc3c7" />            
			<Button fx:id="btnViewReports" maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onViewReports" 
                    style="-fx-alignment: CENTER-LEFT; -fx-background-color: #e67e22;" text="View Reports" textFill="WHITE" />
            
            <VBox VBox.vgrow="ALWAYS" />
            <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#onLogout" 
                    style="-fx-background-color: #c0392b;" text="Logout" textFill="WHITE" />
         </children>
      </VBox>
   </left>
   
   <center>
      <VBox spacing="15.0" style="-fx-padding: 20;">
         <children>
            <HBox alignment="CENTER_LEFT" spacing="15.0">
               <children>
                  <Label fx:id="lblTitle" text="Dashboard">
                     <font>
                        <Font size="24.0" />
                     </font>
                  </Label>
                  <Label fx:id="lblStatus" text="Connected" textFill="#7f8c8d" />
                  
                  <Region HBox.hgrow="ALWAYS" />

                  <HBox alignment="CENTER_RIGHT" spacing="5">
                      <Label text="Today's Hours:" style="-fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                      <Label fx:id="lblTodayHours" text="Loading..." textFill="#2980b9" style="-fx-font-weight: bold;"/>
                  </HBox>
               </children>
            </HBox>
            
            <Separator prefWidth="200.0" />
            
            <VBox VBox.vgrow="ALWAYS">
               <children>
                  
                  <TableView fx:id="tblReservations" visible="false" managed="false" VBox.vgrow="ALWAYS" />
                  
                  <TableView fx:id="tblSubscribers" visible="false" managed="false" VBox.vgrow="ALWAYS" />
                  
                  <VBox fx:id="paneWaitingList" visible="false" managed="false" spacing="10" VBox.vgrow="ALWAYS">
                      <children>
                          <HBox spacing="10" alignment="CENTER_LEFT">
                              <children>
                                  <Button text="+ Add Walk-in" onAction="#onAddWaitingCustomer" 
                                          style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;"/>
                                  <Button text="Remove / Cancel" onAction="#onRemoveWaitingCustomer" 
                                          style="-fx-background-color: #c0392b; -fx-text-fill: white;"/>
                              </children>
                          </HBox>
                          <TableView fx:id="tblWaitingList" VBox.vgrow="ALWAYS" />
                      </children>
                  </VBox>
                  
                  <TableView fx:id="tblCurrentDiners" visible="false" managed="false" VBox.vgrow="ALWAYS" />

                  <VBox fx:id="paneTables" visible="false" managed="false" spacing="10" VBox.vgrow="ALWAYS">
                     <children>
                        <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #ecf0f1; -fx-padding: 10; -fx-background-radius: 5;">
                           <children>
                               <Label text="ID:"/>
                               <TextField fx:id="tfTableId" promptText="e.g. T11" prefWidth="80"/>
                               <Label text="Seats:"/>
                               <TextField fx:id="tfTableSeats" promptText="e.g. 4" prefWidth="60"/>
                               <Button text="Add / Update" onAction="#onAddTable" style="-fx-background-color: #27ae60; -fx-text-fill: white;"/>
                               <Button text="Delete Selected" onAction="#onDeleteTable" style="-fx-background-color: #c0392b; -fx-text-fill: white;"/>
                           </children>
                        </HBox>
                        <TableView fx:id="tblRestaurantTables" VBox.vgrow="ALWAYS" />
                     </children>
                  </VBox>

                 <VBox fx:id="paneOpeningHours" spacing="20.0" visible="false" managed="false" 
      style="-fx-padding: 20; -fx-background-color: white;">
    
    <Label text="Manage Opening Hours" style="-fx-font-size: 24px; -fx-font-weight: bold;"/>

    <VBox spacing="10.0" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 15;">
        <Label text="Regular Weekly Schedule" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
        
        <HBox spacing="20.0">
            <TableView fx:id="tblRegularHours" prefHeight="200.0" prefWidth="400.0">
                <placeholder><Label text="Loading hours..."/></placeholder>
                </TableView>

            <VBox spacing="10.0" alignment="CENTER_LEFT" prefWidth="250.0" 
                  style="-fx-background-color: #f9f9f9; -fx-padding: 15; -fx-background-radius: 5;">
                
                <Label text="Edit Selected Day" style="-fx-font-weight: bold; -fx-underline: true;"/>
                
                <HBox spacing="10.0" alignment="CENTER_LEFT">
                    <Label text="Day:"/>
                    <Label fx:id="lblSelectedRegularDay" text="Select a day..." style="-fx-font-weight: bold;"/>
                </HBox>

                <GridPane hgap="10.0" vgap="10.0">
                    <Label text="Open:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <TextField fx:id="tfRegularOpen" promptText="08:00" prefWidth="80.0" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                    <Label text="Close:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <TextField fx:id="tfRegularClose" promptText="22:00" prefWidth="80.0" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                </GridPane>

                <Button text="Update Day" onAction="#onUpdateRegularHour" 
                        style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-cursor: hand;" maxWidth="Infinity"/>
                
                <Label text="* Select a row in the table to edit" style="-fx-font-size: 10px; -fx-text-fill: grey;"/>
            </VBox>
        </HBox>
    </VBox>

    <VBox spacing="10.0" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 15;">
        <Label text="Special Date Exceptions" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
        
        <HBox spacing="20.0">
            <TableView fx:id="tblSpecialHours" prefHeight="200.0" prefWidth="400.0">
                 <placeholder><Label text="No special dates configured"/></placeholder>
                 </TableView>

            <VBox spacing="10.0">
                <Label text="Add New Exception" style="-fx-font-weight: bold;"/>
                
                <DatePicker fx:id="dpSpecialDate" promptText="Select Date"/>
                
                <HBox spacing="10.0">
                    <TextField fx:id="tfSpecialOpen" promptText="Open (10:00)" prefWidth="90.0"/>
                    <TextField fx:id="tfSpecialClose" promptText="Close (14:00)" prefWidth="90.0"/>
                </HBox>

                <HBox spacing="10.0">
                    <Button text="Add Special Date" onAction="#onAddSpecialHour" 
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white;"/>
                    <Button text="Remove Selected" onAction="#onRemoveSpecialHour" 
                            style="-fx-background-color: #F44336; -fx-text-fill: white;"/>
                </HBox>
            </VBox>
        </HBox>
    </VBox>
</VBox>
                  
				<VBox fx:id="paneReports" visible="false" managed="false" spacing="15" VBox.vgrow="ALWAYS" style="-fx-padding: 15;">
				   <children>
				      <HBox alignment="CENTER_LEFT" spacing="15">
				         <Label text="Monthly Manager Reports" style="-fx-font-size: 20; -fx-font-weight: bold;"/>
				         <Region HBox.hgrow="ALWAYS" />
				         
				         <Label text="Month:"/>
				         <ComboBox fx:id="cbReportMonth" prefWidth="120" promptText="Select Month"/>
				         <Label text="Year:"/>
				         <ComboBox fx:id="cbReportYear" prefWidth="80" promptText="Year"/>
				         
				         <Button text="Load Data" onAction="#onRefreshReports" style="-fx-background-color: #2980b9; -fx-text-fill: white; -fx-font-weight: bold;"/>
				      </HBox>
				      
				      <HBox spacing="20" VBox.vgrow="ALWAYS">
				         <VBox spacing="5" HBox.hgrow="ALWAYS" style="-fx-border-color: #bdc3c7; -fx-padding: 10;">
				             <Label text="Performance: Delays &amp; Overstays" style="-fx-font-weight: bold;"/>
				             <BarChart fx:id="chartPerformance" animated="false">
				                <xAxis><CategoryAxis label="Date" /></xAxis>
				                <yAxis><NumberAxis label="Minutes" /></yAxis>
				             </BarChart>
				         </VBox>
				
				         <VBox spacing="5" HBox.hgrow="ALWAYS" style="-fx-border-color: #bdc3c7; -fx-padding: 10;">
				             <Label text="Subscriber Activity" style="-fx-font-weight: bold;"/>
				             <BarChart fx:id="chartActivity" animated="false">
				                <xAxis><CategoryAxis label="Date" /></xAxis>
				                <yAxis><NumberAxis label="Count" /></yAxis>
				             </BarChart>
				         </VBox>
				      </HBox>
				   </children>
				</VBox>
               </children>
            </VBox>
         </children>
      </VBox>
   </center>
</BorderPane>